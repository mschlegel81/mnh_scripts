trip(m>n,n>0)->[m^2-n^2,2*m*n,m^2+n^2];
trip(mn:IntList(2))->trip@mn;
USE generators;

pairGenerator(3,20,1)
.filter({$x[0]>$x[1] AND (($x[0] and 1)=0 OR ($x[1] and 1)=0) AND gcd($x[0],$x[1])=1})
.map(::trip)
.each(t,begin
  local center:=t.head(2);
  [              center,
   [t[0],0   ]+center,
   [t[0],t[1]]+center,
   center,
   Nan,Nan];
end,|).plot('f polygon red');
